Necesito implementar la funcionalidad para el botón 'Select Employees' dentro de la tabla 'Select Employees For This Combination Working Hours:'.
Contexto:
La tabla 'Select Employees For This Combination WorkingHours:' tiene tres columnas, y cada columna representa una posible combinación de dos turnos (un turno en la Fila 1 y otro en la Fila 2). Debajo de cada par de selectores de turnos (en la Fila 3), hay un botón 'Select Employees'.
Requisitos para el botón 'Select Employees':
Cuando el usuario haga clic en un botón 'Select Employees' específico (por ejemplo, el de la columna 1):
Identificar el Botón Presionado:
El sistema debe saber qué botón específico ('special-btn-1', 'special-btn-2', o 'special-btn-3') fue presionado.
Abrir un Modal de Selección de Empleados:
Debe aparecer una ventana modal (ID: select-employees-modal).
El título del modal (el <h2> dentro de .modal-header) debe ser dinámico. Construye el título así: "Select Employees For This Combination Working Hours: [Duración Turno Fila 1] + [Duración Turno Fila 2] (Seleccionados: X/Y)".
[Duración Turno Fila 1] es la duración del turno seleccionado en el <select> de la Fila 1 para la columna correspondiente al botón presionado. Si no hay turno seleccionado o es "Day Off", mostrar "N/A" o "Day Off".
[Duración Turno Fila 2] es la duración del turno seleccionado en el <select> de la Fila 2 para la columna correspondiente.
(Seleccionados: X/Y) mostrará el número de empleados actualmente marcados (X) sobre el total de empleados disponibles (Y).
Poblar el Modal con Empleados:
Dentro del div con ID employee-checkbox-list en el modal:
Obtén la lista de todos los empleados (employees del currentList).
Para cada empleado, crea una fila en una tabla (o un elemento de lista) que contenga:
Un número secuencial (1., 2., 3., ...).
Un checkbox. El value del checkbox debe ser el employee.uniqueId.
El nombre del empleado (employee.name) y su ID (employee.id) si existe.
Preselección: Si ya existen empleados guardados para el buttonId que abrió el modal (almacenados en currentList.specialRules.employeeSelections[buttonId]), marca los checkboxes de esos empleados.
Actualiza el contador (X/Y) en el título del modal.
Manejar la Selección de Empleados en el Modal:
Cuando el usuario marque o desmarque un checkbox, actualiza inmediatamente el contador (X) en el título del modal.
Guardar la Selección:
El modal tiene un botón con ID save-employee-selection-btn.
Al hacer clic en este botón:
Recopila los uniqueId de todos los empleados cuyos checkboxes estén marcados.
Almacena este array de uniqueId en currentList.specialRules.employeeSelections bajo la clave correspondiente al buttonId que abrió el modal. Por ejemplo, currentList.specialRules.employeeSelections['special-btn-1'] = ['uid_empleado1', 'uid_empleado3'].
Llama a saveCurrentListData() para persistir los cambios.
Cierra el modal.
Muestra una alerta de confirmación (ej: "Employee selection saved!").
Cerrar el Modal:
El modal debe tener un botón de cierre (SPAN con clase close y onclick="closeEmployeeSelectionModal()") que oculte el modal.
Implementar closeEmployeeSelectionModal() para que ponga modal.style.display = 'none' y limpie cualquier estado temporal (como el buttonId que lo llamó).
Funciones Auxiliares a Considerar/Utilizar: